<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="generator" content="Jekyll">

  <title>Service Locator Pattern</title>

  <link rel="stylesheet" href="/css/main.css">
  
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" /> <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Service Locator Pattern | Hacker-Blog</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Service Locator Pattern" />
<meta name="author" content="TruongNV Blog" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="M·ª•c l·ª•c" />
<meta property="og:description" content="M·ª•c l·ª•c" />
<link rel="canonical" href="http://localhost:8000/Service-Locator_pattern" />
<meta property="og:url" content="http://localhost:8000/Service-Locator_pattern" />
<meta property="og:site_name" content="Hacker-Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-01-10T00:00:00+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Service Locator Pattern" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"TruongNV Blog","url":"https://anryseig0.github.io/archive"},"dateModified":"2023-01-10T00:00:00+07:00","datePublished":"2023-01-10T00:00:00+07:00","description":"M·ª•c l·ª•c","headline":"Service Locator Pattern","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:8000/Service-Locator_pattern"},"url":"http://localhost:8000/Service-Locator_pattern"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
  <div id="wrapper">
    <header>
  <div>
    <a href="/">
    
    <h1>truongnv@home:~$</h1>
    </a>
    <div class="header-links">
      <a href="/archive"><h2 class="header-link">Archive</h2></a>
<a href="/about"><h2 class="header-link">About</h2></a>
<a href="/atom.xml"><h2 class="header-link">RSS</h2></a>
    </div>
  </div>
</header>
    <div class="container">
      <section id="main_content">
        <article>
  <h2>Service Locator Pattern</h2>
  <time datetime="2023-01-10T00:00:00+07:00" class="by-line">10 Jan 2023</time>
  <h1 id="-m·ª•c-l·ª•c"><a href="#header-1"></a> M·ª•c l·ª•c</h1>

<ol>
  <li>Service Locator Pattern l√† g√¨ ?</li>
  <li>C√†i ƒë·∫∑t Service Locator nh∆∞ th·∫ø n√†o ?</li>
  <li>Code</li>
  <li>∆Øu ƒëi·ªÉm vs nh∆∞·ª£c ƒëi·ªÉm ?</li>
  <li>Use case ƒëi·ªÉn h√¨nh.</li>
</ol>

<h1 id="-service-locator-pattern-l√†-g√¨-"><a href="#header-1"></a> Service Locator Pattern l√† g√¨ ?</h1>
<p><code class="language-plaintext highlighter-rouge">Service Locator</code> l√† m·ªôt pattern cho ph√©p client c√≥ th·ªÉ ƒë·ªãnh v·ªã nh·ªØng
<strong>service</strong> m√† n√≥ s·ª≠ d·ª•ng. B·∫±ng c√°ch t√°ch r·ªùi m·ªëi li√™n h·∫øt gi·ªØa class v·ªõi 
c√°c dependencies (hay g·ªçi l√† services) c·ªßa n√≥ th√¥ng qua vi·ªác chen v√†o gi·ªØa 
m·ªëi li√™n k·∫øt m·ªôt ƒë·ªëi t∆∞·ª£ng trung gian l√† <code class="language-plaintext highlighter-rouge">Service Locator</code></p>

<p><img src="../assets/2023_01/service-locator-01.png" alt="image" /></p>

<p>üö© Th√¥ng th∆∞·ªùng th√¨ <code class="language-plaintext highlighter-rouge">Service Locator Pattern</code> ƒë∆∞·ª£c k·∫øt h·ª£p v·ªõi <code class="language-plaintext highlighter-rouge">Factory Pattern</code>
ho·∫∑c <code class="language-plaintext highlighter-rouge">Dependency Injection Pattern</code> ƒë·ªÉ c√≥ th·ªÉ t·∫°o ra c√°c instance c·ªßa service</p>

<h1 id="-c√†i-ƒë·∫∑t-service-locator-nh∆∞-th·∫ø-n√†o"><a href="#header-1"></a> C√†i ƒë·∫∑t Service Locator nh∆∞ th·∫ø n√†o?</h1>

<p>Class Diagram</p>

<p><img src="../assets/2023_01/service-locator-02.png" alt="image" /></p>

<p>V·ªõi diagram nh∆∞ tr√™n ta c√≥ th·ªÉ hi·ªÉu flow ƒë·ªÉ setup m·ªôt <code class="language-plaintext highlighter-rouge">Service Locator</code> nh∆∞ sau:</p>
<ol>
  <li>Client th·ª±c hi·ªán nghi·ªáp v·ª• v√† g·ªçi v√†o <code class="language-plaintext highlighter-rouge">ServiceLocator</code> ƒë·ªÉ l·∫•y service c·∫ßn d√πng (hay dependency c·∫ßn d√πng)</li>
  <li><code class="language-plaintext highlighter-rouge">ServiceLocator</code> check trong <code class="language-plaintext highlighter-rouge">Cache</code> xem service ƒë√≥ ƒë√£ c√≥ trong <code class="language-plaintext highlighter-rouge">Cache</code> ch∆∞a ?</li>
  <li>N·∫øu c√≥ th√¨ tr·∫£ v·ªÅ service c·∫ßn d√πng.</li>
  <li>N·∫øu kh√¥ng th√¨ ti·∫øp t·ª•c:
    <ul>
      <li>G·ªçi v√†o <code class="language-plaintext highlighter-rouge">InitialContext</code> ƒë·ªÉ kh·ªüi t·∫°o service</li>
      <li><code class="language-plaintext highlighter-rouge">InitialContext</code> th√¥ng quan interface <code class="language-plaintext highlighter-rouge">Service</code> ƒë·ªÉ l·∫•y instance c·ªßa <code class="language-plaintext highlighter-rouge">ServiceImpl</code> theo c√°c th√¥ng s·ªë</li>
      <li>Tr·∫£ v·ªÅ service instance cho <code class="language-plaintext highlighter-rouge">ServiceLocator</code></li>
      <li>V√† song song ƒë√≥, cache l·∫°i service trong <code class="language-plaintext highlighter-rouge">Cache</code></li>
    </ul>
  </li>
</ol>

<p>üö© <strong>Note</strong> : <code class="language-plaintext highlighter-rouge">ServiceLocator</code> lu√¥n l√† Singleton , tr√°nh racing condition.</p>

<h1 id="-code"><a href="#header-1"></a> CODE</h1>
<p>Code on <a href="https://github.com/AnrySeig0/java-design-pattern/tree/master/service-locator">GitHub</a></p>

<p>ƒê·∫ßu ti√™n ta kh·ªüi t·∫°o m·ªôt interface <code class="language-plaintext highlighter-rouge">Service</code> v√† <code class="language-plaintext highlighter-rouge">ServiceImpl</code>.
Trong <code class="language-plaintext highlighter-rouge">ServiceImpl</code>, inject 2 th√¥ng s·ªë l√† <code class="language-plaintext highlighter-rouge">serviceName</code> v√† <code class="language-plaintext highlighter-rouge">id</code></p>

<p>Interface <code class="language-plaintext highlighter-rouge">Service.java</code></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Service.java</span>
<span class="c1">// [Interface]</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Service</span> <span class="o">{</span>
  <span class="c1">// the human-readable name of the service</span>
  <span class="nc">String</span> <span class="nf">getName</span><span class="o">();</span>

  <span class="c1">// UniqueID of the particular service</span>
  <span class="kt">int</span> <span class="nf">getId</span><span class="o">();</span>

  <span class="c1">// The workflow method that defines what this service does</span>
  <span class="kt">void</span> <span class="nf">execute</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Class <code class="language-plaintext highlighter-rouge">ServiceImpl.java</code></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ServiceImpl.java</span>
<span class="c1">// [Class]</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceImpl</span> <span class="kd">implements</span> <span class="nc">Service</span><span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">serviceName</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>

  <span class="c1">// Constructor</span>
  <span class="kd">public</span> <span class="nf">ServiceImpl</span><span class="o">(</span><span class="nc">String</span> <span class="n">serviceName</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">serviceName</span> <span class="o">=</span> <span class="n">serviceName</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="nc">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="nc">Math</span><span class="o">.</span><span class="na">random</span><span class="o">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">serviceName</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Service {} is now executing with id {}"</span><span class="o">,</span> <span class="n">getName</span><span class="o">(),</span> <span class="n">getId</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">ServiceImpl</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServiceImpl</span><span class="o">(</span><span class="s">"test"</span><span class="o">);</span>
    <span class="n">a</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Kh·ªüi t·∫°o class <code class="language-plaintext highlighter-rouge">InitContext.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// InitContext.java</span>
<span class="c1">// Class</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InitContext</span> <span class="o">{</span>

  <span class="cm">/**
   * Perform the lookup based on the service name.
   * The return object will need to be cast into a {@link Service}
   *
   * @param serviceName: a name
   * @return : an {@link Service}
   */</span>
  <span class="kd">public</span> <span class="nc">ServiceImpl</span> <span class="nf">lookup</span><span class="o">(</span><span class="nc">String</span> <span class="n">serviceName</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="s">"serviceA"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">serviceName</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Looking up service A and creating new service for A"</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">ServiceImpl</span><span class="o">(</span><span class="s">"serviceA"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="s">"serviceB"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">serviceName</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Looking up service B and creating new service for B"</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">ServiceImpl</span><span class="o">(</span><span class="s">"serviceB"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">ServiceCache.java</code></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ServiceCache.java</span>
<span class="c1">// Class</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.var</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceCache</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Service</span><span class="o">&gt;</span> <span class="n">serviceCache</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">ServiceCache</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">serviceCache</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
  <span class="o">}</span>

  <span class="cm">/**
   * Get the service from cache. null if no service is found matching the name
   *
   * @param serviceName: a string
   * @return {@link Service}
   */</span>
  <span class="kd">public</span> <span class="nc">Service</span> <span class="nf">getService</span><span class="o">(</span><span class="nc">String</span> <span class="n">serviceName</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">serviceCache</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">serviceName</span><span class="o">))</span> <span class="o">{</span>
      <span class="kt">var</span> <span class="n">cacheService</span> <span class="o">=</span> <span class="n">serviceCache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">serviceName</span><span class="o">);</span>
      <span class="kt">var</span> <span class="n">name</span> <span class="o">=</span> <span class="n">cacheService</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
      <span class="kt">var</span> <span class="n">id</span> <span class="o">=</span> <span class="n">cacheService</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
      <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"(cache call) Fetched service {}({}) from cache ...!"</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">cacheService</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="cm">/**
   * Adds the service into the cache map.
   *
   * @param newService: a {@link Service}
   */</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addService</span><span class="o">(</span><span class="nc">Service</span> <span class="n">newService</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">serviceCache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">newService</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">newService</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>R·ªìi b√¢y gi·ªù k·∫øt h·ª£p service v√† cache l·∫°i ƒë·ªÉ c√≥ <code class="language-plaintext highlighter-rouge">ServiceLocator.java</code></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ServiceLocator.java</span>
<span class="c1">// Class</span>
<span class="kn">import</span> <span class="nn">lombok.var</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Objects</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceLocator</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">ServiceCache</span> <span class="n">serviceCache</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServiceCache</span><span class="o">();</span>

  <span class="kd">private</span> <span class="nf">ServiceLocator</span><span class="o">(){}</span>

  <span class="cm">/**
   * Fetch the service with the name param from the cache first,
   * if no service is found, lookup the service from the {@link InitContext}
   * and then add the newly created service into the cache map
   * for future request
   *
   * @param serviceName: astring
   * @return {@link Service}
   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Service</span> <span class="nf">getService</span><span class="o">(</span><span class="nc">String</span> <span class="n">serviceName</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">var</span> <span class="n">serviceObj</span> <span class="o">=</span> <span class="n">serviceCache</span><span class="o">.</span><span class="na">getService</span><span class="o">(</span><span class="n">serviceName</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="nc">Objects</span><span class="o">.</span><span class="na">isNull</span><span class="o">(</span><span class="n">serviceObj</span><span class="o">))</span> <span class="o">{</span>
      <span class="cm">/*
       * If we are unable to retrieve anything from cache, then lookup the service
       * and add it in the cache map
       */</span>
      <span class="kt">var</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InitContext</span><span class="o">();</span>
      <span class="n">serviceObj</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">lookup</span><span class="o">(</span><span class="n">serviceName</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="nc">Objects</span><span class="o">.</span><span class="na">nonNull</span><span class="o">(</span><span class="n">serviceObj</span><span class="o">))</span> <span class="o">{</span> <span class="c1">// Only cache a service if it actually exists</span>
        <span class="n">serviceCache</span><span class="o">.</span><span class="na">addService</span><span class="o">(</span><span class="n">serviceObj</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">serviceObj</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Th·ª≠ nghi·ªám build m·ªôt client ƒë·ªÉ ch·∫°y th·ª≠ <code class="language-plaintext highlighter-rouge">App.java</code></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// App.java</span>
<span class="c1">// CLass</span>
<span class="kn">import</span> <span class="nn">lombok.var</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">JNDI_SERVICE_A</span> <span class="o">=</span> <span class="s">"serviceA"</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">JNDI_SERVICE_B</span> <span class="o">=</span> <span class="s">"serviceB"</span><span class="o">;</span>

  <span class="c1">// Program entry point</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">var</span> <span class="n">service</span> <span class="o">=</span> <span class="nc">ServiceLocator</span><span class="o">.</span><span class="na">getService</span><span class="o">(</span><span class="no">JNDI_SERVICE_A</span><span class="o">);</span>
    <span class="n">service</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
    <span class="n">service</span> <span class="o">=</span> <span class="nc">ServiceLocator</span><span class="o">.</span><span class="na">getService</span><span class="o">(</span><span class="no">JNDI_SERVICE_B</span><span class="o">);</span>
    <span class="n">service</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
    <span class="n">service</span> <span class="o">=</span> <span class="nc">ServiceLocator</span><span class="o">.</span><span class="na">getService</span><span class="o">(</span><span class="no">JNDI_SERVICE_A</span><span class="o">);</span>
    <span class="n">service</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
    <span class="n">service</span> <span class="o">=</span> <span class="nc">ServiceLocator</span><span class="o">.</span><span class="na">getService</span><span class="o">(</span><span class="no">JNDI_SERVICE_A</span><span class="o">);</span>
    <span class="n">service</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Run it !!!!!</p>

<p>üö© <strong>Note</strong> : R√µ r√†ng ·ªü ƒë√¢y t·∫ßng <code class="language-plaintext highlighter-rouge">InitContext</code> ch∆∞a ƒë∆∞·ª£c t·ªëi ∆∞u, m·ªói khi th√™m m·ªôt service X v√†o system,
code s·∫Ω ph·∫£i thay ƒë·ªïi ƒë·ªÉ th√™m d·ªãch v·ª•. CH·ªó n√†y c√°c b·∫°n c√≥ th·ªÉ tham kh·∫£o c√°ch code <code class="language-plaintext highlighter-rouge">Reflection</code> ƒë·ªÉ t·ªëi ∆∞u h∆°n.</p>

<h1 id="-∆∞u-ƒëi·ªÉm-vs-nh∆∞·ª£c-ƒëi·ªÉm-"><a href="#header-1"></a> ∆Øu ƒëi·ªÉm vs nh∆∞·ª£c ƒëi·ªÉm ?</h1>

<p>∆Øu ƒëi·ªÉm:</p>
<ul>
  <li>Qu·∫£n l√Ω t·∫≠p trung c√°c service th√¥ng qua <code class="language-plaintext highlighter-rouge">ServiceLocator</code> duy nh·∫•t (Singleton)</li>
  <li>·ª®ng d·ª•ng chia ra c√°c ph·∫ßn √≠t b·ªã r·∫±ng bu·ªôc (loose coupling) v·ªõi nhau. D·ªÖ code, qu·∫£n l√Ω h∆°n.</li>
  <li>T√°ch r·ªùi class v·ªõi c√°c dependencies c·ªßa n√≥, nh·ªù ƒë√≥ c√≥ th·ªÉ thay th·∫ø c√°c dependency t·∫°i th·ªùi ƒëi·ªÉm <code class="language-plaintext highlighter-rouge">run-time</code>
m√† kh√¥ng c·∫ßn ph·∫£i <code class="language-plaintext highlighter-rouge">re-compile</code> hay ph·∫£i restart ·ª©ng d·ª•ng</li>
  <li>D·ªÖ test h∆°n do c√°c class kh√¥ng c√≤n b·ªã ph·ª• thu·ªôc v√†o dependencies</li>
</ul>

<p>Nh∆∞·ª£c ƒëi·ªÉm:</p>
<ul>
  <li>Kh√≥ debug h∆°n, v√¨ c√°c dependencies tr·ªü th√†nh hidden ƒë·ªëi v·ªõi class</li>
  <li><code class="language-plaintext highlighter-rouge">ServiceLocator</code> l√† duy nh·∫•t =&gt; ngh·∫Ωn c·ªï chai</li>
  <li>C√≥ th·ªÉ s·∫Ω g·∫∑p l·ªói tr√™n <code class="language-plaintext highlighter-rouge">run-time</code> m√† kh√¥ng g·∫∑p khi <code class="language-plaintext highlighter-rouge">compile-time</code> do c√°c service b·ªã ·∫©n ƒëi</li>
  <li><code class="language-plaintext highlighter-rouge">Service Locator Pattern</code> kh√≥ maintain h∆°n <code class="language-plaintext highlighter-rouge">Dependency Injection Pattern</code>. Do c√°c concrete class v·∫´n c√≥ ph·ª• thu·ªôc v√†o 
<code class="language-plaintext highlighter-rouge">ServiceLocator</code>, trong khi ƒë√≥ DI ch·ªâ d·ªçi m·ªôt l·∫ßn ƒë√™ inject c√°c dependencies v√†o l·ªõp ch√≠nh.=&gt; DI d·ªÖ vi·∫øt Unit Test h∆°n.</li>
</ul>

<h1 id="-use-case"><a href="#header-1"></a> Use Case</h1>
<ul>
  <li>Khi c·∫ßn t√°ch r·ªùi m·ªôt class v·ªõi c√°c dependencies c·ªßa n√≥.</li>
  <li>Khi c·∫ßn qu·∫£n l√Ω t·∫≠p trung vi·ªác kh·ªüi t·∫°o c√°c <code class="language-plaintext highlighter-rouge">Service</code></li>
</ul>

<h1 id="-l·ªùi-k·∫øt"><a href="#header-1"></a> L·ªùi k·∫øt</h1>
<p><code class="language-plaintext highlighter-rouge">Service Locator</code> l√† m·ªôt c√°ch th·ª±c hi·ªán IoC Container.
Khi ƒë·ªçc Spring ta s·∫Ω g·∫∑p r·∫•t nhi·ªÅu kh√°i ni·ªám <code class="language-plaintext highlighter-rouge">Dependency Inverrsion</code> trong SOLID, IoC Container, DI container ‚Ä¶‚Ä¶
C√°c b √†i vi·∫øt s·∫Øp t·ªõi s·∫Ω vi·∫øt v·ªÅ c√°c thu·∫≠t ng·ªØ n√†y.</p>

</article>
      </section>
    </div>
  </div>

   <footer>
  <a href="https://creativecommons.org/licenses/by-nc/3.0/deed.en_US">
    <span>
        <b>truongnv</b>
    </span>
    
    <span>¬© 2023</span>
  </a>
</footer>

  
</body>

</html>